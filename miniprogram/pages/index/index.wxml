<!--index.wxml-->
<view>
  <button type="primary" wx:if="{{!hasUserInfo && canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo" class="margin-top-200"> 获取昵称</button>
  <block wx:else>
    <swiper style="height: 100vh;" indicator-dots="true">
      <swiper-item wx:for="{{ondutyData}}" wx:for-item="team" wx:key="name" style="overflow-y: auto;">
        <view class="padding margin-bottom-xl">
          <view class="margin-bottom flex text-xxl align-center">
            <view class="flex-sub">
              <text class="{{team._id?'cuIcon-group':'cuIcon-emoji'}} margin-lr-xs" />
              <text>{{team.name}}</text>
            </view>
            <view wx:if="{{team._id}}">
              <text class="cuIcon-favor margin-lr-xs" />
              <text class="cuIcon-settings margin-lr-xs" />
            </view>
          </view>
          <view wx:for="{{team.activities}}" wx:key="name" wx:for-item="activity"
                class="margin-tb bg-img bg-mask text-white radius flex justify-between padding-tb padding-lr-xl" style="background-image: url('{{activity.bgimg}}'); height: 250rpx;"
                data-teamname='{{team.name}}' data-activtityname='{{activity.name}}' bindtap="manageActivity">
            <view class="flex-sub margin-right">
              <view class="text-xl padding-tb-xs">{{activity.name}}</view>
              <view class="text-df padding-tb-xs">{{activity.desc}}</view>
            </view>
            <view class="text-sl self-end">
              {{activity.onDutyUser}}
            </view>
          </view>
          <view wx:if="{{team.activities.length == 0}}" class="text-center margin-top-200">
            今天没有值班
          </view>
        </view>
      </swiper-item>
    </swiper>
  </block>
</view>
